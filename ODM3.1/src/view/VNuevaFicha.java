/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package view;

import com.mxrck.autocompleter.TextAutoCompleter;
import entities.Armazon;
import entities.Cliente;
import entities.Cristal;
import entities.Descuento;
import entities.Doctor;
import entities.Ficha;
import entities.HistorialPago;
import entities.Institucion;
import entities.Lente;
import entities.TipoPago;
import fn.FnNuevaFicha;
import fn.FnValidaRut;
import java.awt.Color;
import java.sql.SQLException;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import static view.ContentAdmin.principalAdmin;

/**
 *
 * @author home
 */
public class VNuevaFicha extends javax.swing.JPanel {

    private FnNuevaFicha load = new FnNuevaFicha();
    private static JLabel lblIdTipoPago = new JLabel();
    /**
     * Creates new form VNuevaFicha
     */
    public VNuevaFicha() throws SQLException, ClassNotFoundException {
        initComponents();
        txtTotal.setText("0");
        cargarCbos();
        autocompletar();
        lblCristalCerca.setVisible(false);
        lblCristalLejos.setVisible(false);
        lblLenteCerca.setVisible(false);
        lblLenteLejos.setVisible(false);
        lblIdTipoPago.setText("0");
        
       // JFormattedTextField.COMMIT_OR_REVERT. Esta es la opción por defecto y la más útil. Si el texto introducido es incorrecto, se vuelve automáticamente al último valor bueno conocido. Si el texto no es válido, se muestra el último valor bueno conocido.<>
    }
    
    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        txtFecha = new com.toedter.calendar.JDateChooser();
        jLabel2 = new javax.swing.JLabel();
        txtEntrega = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        txtHora = new javax.swing.JSpinner();
        jLabel4 = new javax.swing.JLabel();
        txtMinuto = new javax.swing.JSpinner();
        jPanel2 = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        txtInstitucion = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        txtRutCliente = new javax.swing.JTextField();
        jLabel7 = new javax.swing.JLabel();
        txtNombreCliente = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        txtTelefonoCliente = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        txtMailCliente = new javax.swing.JTextField();
        txtDireccionCliente = new javax.swing.JTextField();
        jLabel11 = new javax.swing.JLabel();
        txtComuna = new javax.swing.JTextField();
        jLabel12 = new javax.swing.JLabel();
        txtCiudad = new javax.swing.JTextField();
        jLabel13 = new javax.swing.JLabel();
        cboSexo = new javax.swing.JComboBox<>();
        jLabel14 = new javax.swing.JLabel();
        txtEdad = new javax.swing.JSpinner();
        jLabel15 = new javax.swing.JLabel();
        lblIdInstitucion = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jLabel10 = new javax.swing.JLabel();
        txtArmazonLejos = new javax.swing.JTextField();
        jLabel16 = new javax.swing.JLabel();
        txtODLejosESF = new javax.swing.JTextField();
        jLabel17 = new javax.swing.JLabel();
        txtODLejosCIL = new javax.swing.JTextField();
        jLabel18 = new javax.swing.JLabel();
        txtODLejosA = new javax.swing.JTextField();
        jLabel19 = new javax.swing.JLabel();
        txtOILejosESF = new javax.swing.JTextField();
        txtOILejosCIL = new javax.swing.JTextField();
        txtOILejosA = new javax.swing.JTextField();
        jLabel20 = new javax.swing.JLabel();
        jLabel21 = new javax.swing.JLabel();
        jLabel22 = new javax.swing.JLabel();
        txtDPLejos = new javax.swing.JSpinner();
        chkEndurecidoLejos = new javax.swing.JCheckBox();
        chkCapaLejos = new javax.swing.JCheckBox();
        chkPlusMaxLejos = new javax.swing.JCheckBox();
        jLabel26 = new javax.swing.JLabel();
        txtCristalLejos = new javax.swing.JTextField();
        jLabel31 = new javax.swing.JLabel();
        jLabel41 = new javax.swing.JLabel();
        jPanel5 = new javax.swing.JPanel();
        jLabel32 = new javax.swing.JLabel();
        txtArmazonCerca = new javax.swing.JTextField();
        jLabel33 = new javax.swing.JLabel();
        txtODCercaESF = new javax.swing.JTextField();
        jLabel34 = new javax.swing.JLabel();
        txtODCercaCIL = new javax.swing.JTextField();
        jLabel35 = new javax.swing.JLabel();
        txtODCercaA = new javax.swing.JTextField();
        jLabel36 = new javax.swing.JLabel();
        txtOICercaESF = new javax.swing.JTextField();
        txtOICercaCIL = new javax.swing.JTextField();
        txtOICercaA = new javax.swing.JTextField();
        jLabel37 = new javax.swing.JLabel();
        jLabel38 = new javax.swing.JLabel();
        jLabel39 = new javax.swing.JLabel();
        txtDPCerca = new javax.swing.JSpinner();
        chkEndurecidoCerca = new javax.swing.JCheckBox();
        chkCapaCerca = new javax.swing.JCheckBox();
        chkPlusMaxCerca = new javax.swing.JCheckBox();
        jLabel40 = new javax.swing.JLabel();
        txtAddCerca = new javax.swing.JTextField();
        jLabel28 = new javax.swing.JLabel();
        txtCristalCerca = new javax.swing.JTextField();
        jLabel29 = new javax.swing.JLabel();
        jLabel30 = new javax.swing.JLabel();
        jPanel4 = new javax.swing.JPanel();
        jLabel23 = new javax.swing.JLabel();
        txtDoctor = new javax.swing.JTextField();
        lblRutDoctor = new javax.swing.JLabel();
        jPanel6 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        txtObs = new javax.swing.JTextArea();
        jPanel7 = new javax.swing.JPanel();
        jLabel24 = new javax.swing.JLabel();
        jLabel25 = new javax.swing.JLabel();
        txtAbono = new javax.swing.JSpinner();
        cboTipoPago = new javax.swing.JComboBox<>();
        jLabel27 = new javax.swing.JLabel();
        chkDescuento = new javax.swing.JCheckBox();
        cboDescuento = new javax.swing.JComboBox<>();
        lblDescuento = new javax.swing.JLabel();
        txtSaldo = new javax.swing.JTextField();
        txtDescuento = new javax.swing.JTextField();
        lblIdDescuento = new javax.swing.JLabel();
        lblCristalLejos = new javax.swing.JLabel();
        lblCristalCerca = new javax.swing.JLabel();
        lblLenteCerca = new javax.swing.JLabel();
        lblLenteLejos = new javax.swing.JLabel();
        txtTotal = new javax.swing.JTextField();
        jPanel8 = new javax.swing.JPanel();
        btnGuardar = new javax.swing.JButton();

        setBackground(new java.awt.Color(255, 255, 255));

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Datos de entrega", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe Print", 0, 11))); // NOI18N

        jLabel1.setText("Fecha de entrega");

        jLabel2.setText("Lugar de entrega");

        txtEntrega.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtEntregaKeyTyped(evt);
            }
        });

        jLabel3.setText("Hora de entrega");

        txtHora.setModel(new javax.swing.SpinnerNumberModel(0, 0, 23, 1));

        jLabel4.setText(":");

        txtMinuto.setModel(new javax.swing.SpinnerNumberModel(0, 0, 59, 1));

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel1)
                    .addComponent(txtFecha, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtEntrega, javax.swing.GroupLayout.PREFERRED_SIZE, 184, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(txtHora, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel4)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtMinuto, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jLabel3)))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jLabel2)
                    .addComponent(jLabel3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtFecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtEntrega, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(txtHora, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel4)
                        .addComponent(txtMinuto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
        );

        jPanel2.setBackground(new java.awt.Color(255, 255, 255));
        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Datos de Cliente", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe Print", 0, 11))); // NOI18N

        jLabel5.setText("Institución");

        txtInstitucion.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtInstitucionFocusLost(evt);
            }
        });
        txtInstitucion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtInstitucionActionPerformed(evt);
            }
        });
        txtInstitucion.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtInstitucionKeyTyped(evt);
            }
        });

        jLabel6.setText("Rut Cliente");

        txtRutCliente.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtRutClienteFocusLost(evt);
            }
        });
        txtRutCliente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtRutClienteActionPerformed(evt);
            }
        });
        txtRutCliente.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtRutClienteKeyTyped(evt);
            }
        });

        jLabel7.setText("Nombre");

        txtNombreCliente.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtNombreClienteKeyTyped(evt);
            }
        });

        jLabel8.setText("Tel.");

        txtTelefonoCliente.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtTelefonoClienteKeyTyped(evt);
            }
        });

        jLabel9.setText("Mail");

        txtMailCliente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtMailClienteActionPerformed(evt);
            }
        });
        txtMailCliente.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtMailClienteKeyTyped(evt);
            }
        });

        txtDireccionCliente.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtDireccionClienteKeyTyped(evt);
            }
        });

        jLabel11.setText("Comuna");

        txtComuna.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtComunaKeyTyped(evt);
            }
        });

        jLabel12.setText("Ciudad");

        txtCiudad.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtCiudadKeyTyped(evt);
            }
        });

        jLabel13.setText("Sexo");

        cboSexo.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        jLabel14.setText("Edad");

        txtEdad.setModel(new javax.swing.SpinnerNumberModel(0, 0, 99, 1));

        jLabel15.setText("Dirección  ");

        lblIdInstitucion.setText("0");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(0, 0, 0)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel8, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel15, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel12, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(7, 7, 7)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                        .addComponent(txtCiudad, javax.swing.GroupLayout.DEFAULT_SIZE, 178, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel13)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(cboSexo, javax.swing.GroupLayout.PREFERRED_SIZE, 123, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel14)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(txtEdad, javax.swing.GroupLayout.PREFERRED_SIZE, 62, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                        .addComponent(txtDireccionCliente)
                        .addGap(18, 18, 18)
                        .addComponent(jLabel11)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtComuna, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(txtTelefonoCliente, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel9)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(txtInstitucion)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel2Layout.createSequentialGroup()
                                .addComponent(txtRutCliente, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jLabel7)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtNombreCliente)
                                    .addComponent(txtMailCliente))))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblIdInstitucion, javax.swing.GroupLayout.PREFERRED_SIZE, 8, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(txtInstitucion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblIdInstitucion))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(txtRutCliente, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel7)
                    .addComponent(txtNombreCliente, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8)
                    .addComponent(txtTelefonoCliente, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel9)
                    .addComponent(txtMailCliente, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtDireccionCliente, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel11)
                    .addComponent(txtComuna, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel15))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel14)
                    .addComponent(txtEdad, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(cboSexo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel13)
                    .addComponent(jLabel12)
                    .addComponent(txtCiudad, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
        );

        jPanel3.setBackground(new java.awt.Color(255, 255, 255));
        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "LEJOS ", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe Print", 0, 11))); // NOI18N

        jLabel10.setText("Armazon");

        txtArmazonLejos.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtArmazonLejosFocusLost(evt);
            }
        });
        txtArmazonLejos.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtArmazonLejosKeyTyped(evt);
            }
        });

        jLabel16.setText("O.D.   ");

        txtODLejosESF.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtODLejosESFKeyTyped(evt);
            }
        });

        jLabel17.setText("ESF");

        txtODLejosCIL.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtODLejosCILKeyTyped(evt);
            }
        });

        jLabel18.setText("CIL");

        txtODLejosA.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtODLejosAKeyTyped(evt);
            }
        });

        jLabel19.setText("O.I.   ");

        txtOILejosESF.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtOILejosESFKeyTyped(evt);
            }
        });

        txtOILejosCIL.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtOILejosCILKeyTyped(evt);
            }
        });

        txtOILejosA.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtOILejosAKeyTyped(evt);
            }
        });

        jLabel20.setText("CIL");

        jLabel21.setText("ESF");

        jLabel22.setText("D.P.   ");

        txtDPLejos.setModel(new javax.swing.SpinnerNumberModel(0, -99, 99, 1));

        chkEndurecidoLejos.setText("ENDURECIDO");

        chkCapaLejos.setText("CAPA");

        chkPlusMaxLejos.setText("PLUS MAX");

        jLabel26.setText("Cristal");

        txtCristalLejos.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtCristalLejosFocusLost(evt);
            }
        });
        txtCristalLejos.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtCristalLejosKeyTyped(evt);
            }
        });

        jLabel31.setText("A");

        jLabel41.setText("A");

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(jLabel19, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel16, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel10, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel22, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel3Layout.createSequentialGroup()
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addGroup(jPanel3Layout.createSequentialGroup()
                                        .addComponent(jLabel17)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(txtODLejosESF, javax.swing.GroupLayout.DEFAULT_SIZE, 120, Short.MAX_VALUE))
                                    .addGroup(jPanel3Layout.createSequentialGroup()
                                        .addComponent(jLabel21)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(txtOILejosESF)))
                                .addGap(6, 6, 6)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel18)
                                    .addComponent(jLabel20))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtODLejosCIL, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(txtOILejosCIL, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(txtDPLejos, javax.swing.GroupLayout.PREFERRED_SIZE, 74, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(chkEndurecidoLejos)))
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel41, javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel31, javax.swing.GroupLayout.Alignment.TRAILING))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(txtODLejosA, javax.swing.GroupLayout.DEFAULT_SIZE, 124, Short.MAX_VALUE)
                                    .addComponent(txtOILejosA)))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGap(12, 12, 12)
                                .addComponent(chkCapaLejos)
                                .addGap(18, 18, 18)
                                .addComponent(chkPlusMaxLejos)
                                .addGap(0, 0, Short.MAX_VALUE))))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(txtArmazonLejos)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel26)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtCristalLejos, javax.swing.GroupLayout.PREFERRED_SIZE, 252, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(1, 1, 1))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel10)
                    .addComponent(txtArmazonLejos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel26)
                    .addComponent(txtCristalLejos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel16)
                    .addComponent(txtODLejosESF, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel17)
                    .addComponent(txtODLejosCIL, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel18)
                    .addComponent(txtODLejosA, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel31))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel19)
                    .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtOILejosESF, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(txtOILejosCIL, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(txtOILejosA, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel20)
                        .addComponent(jLabel21)
                        .addComponent(jLabel41)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel22)
                    .addComponent(txtDPLejos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(chkEndurecidoLejos)
                    .addComponent(chkCapaLejos)
                    .addComponent(chkPlusMaxLejos))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel5.setBackground(new java.awt.Color(255, 255, 255));
        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "CERCA", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe Print", 0, 11))); // NOI18N

        jLabel32.setText("Armazon");

        txtArmazonCerca.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtArmazonCercaFocusLost(evt);
            }
        });
        txtArmazonCerca.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtArmazonCercaKeyTyped(evt);
            }
        });

        jLabel33.setText("O.D.   ");

        txtODCercaESF.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtODCercaESFActionPerformed(evt);
            }
        });
        txtODCercaESF.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtODCercaESFKeyTyped(evt);
            }
        });

        jLabel34.setText("ESF");

        txtODCercaCIL.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtODCercaCILKeyTyped(evt);
            }
        });

        jLabel35.setText("A");

        txtODCercaA.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtODCercaAKeyTyped(evt);
            }
        });

        jLabel36.setText("O.I.   ");

        txtOICercaESF.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtOICercaESFKeyTyped(evt);
            }
        });

        txtOICercaCIL.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtOICercaCILKeyTyped(evt);
            }
        });

        txtOICercaA.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtOICercaAKeyTyped(evt);
            }
        });

        jLabel37.setText("A");

        jLabel38.setText("ESF");

        jLabel39.setText("D.P.   ");

        txtDPCerca.setModel(new javax.swing.SpinnerNumberModel(0, -99, 99, 1));

        chkEndurecidoCerca.setText("ENDURECIDO");

        chkCapaCerca.setText("CAPA");

        chkPlusMaxCerca.setText("PLUS MAX");

        jLabel40.setText("ADD  ");

        txtAddCerca.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtAddCercaKeyTyped(evt);
            }
        });

        jLabel28.setText("Cristal");

        txtCristalCerca.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtCristalCercaFocusLost(evt);
            }
        });
        txtCristalCerca.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtCristalCercaKeyTyped(evt);
            }
        });

        jLabel29.setText("CIL");

        jLabel30.setText("CIL");

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(jLabel36, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel33, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel32, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel39, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel40, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel5Layout.createSequentialGroup()
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel5Layout.createSequentialGroup()
                                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addGroup(jPanel5Layout.createSequentialGroup()
                                        .addComponent(jLabel34)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(txtODCercaESF, javax.swing.GroupLayout.DEFAULT_SIZE, 120, Short.MAX_VALUE))
                                    .addGroup(jPanel5Layout.createSequentialGroup()
                                        .addComponent(jLabel38)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(txtOICercaESF)))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel29)
                                    .addComponent(jLabel30))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtODCercaCIL, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(txtOICercaCIL, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(jPanel5Layout.createSequentialGroup()
                                .addComponent(txtDPCerca, javax.swing.GroupLayout.PREFERRED_SIZE, 74, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(chkEndurecidoCerca)))
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel5Layout.createSequentialGroup()
                                .addGap(18, 18, Short.MAX_VALUE)
                                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel35, javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel37, javax.swing.GroupLayout.Alignment.TRAILING))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED))
                            .addGroup(jPanel5Layout.createSequentialGroup()
                                .addGap(12, 12, 12)
                                .addComponent(chkCapaCerca)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel5Layout.createSequentialGroup()
                                .addGap(10, 10, 10)
                                .addComponent(chkPlusMaxCerca))
                            .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(txtODCercaA, javax.swing.GroupLayout.DEFAULT_SIZE, 124, Short.MAX_VALUE)
                                .addComponent(txtOICercaA))))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel5Layout.createSequentialGroup()
                        .addComponent(txtArmazonCerca, javax.swing.GroupLayout.PREFERRED_SIZE, 185, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 8, Short.MAX_VALUE)
                        .addComponent(jLabel28)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 9, Short.MAX_VALUE)
                        .addComponent(txtCristalCerca, javax.swing.GroupLayout.PREFERRED_SIZE, 245, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(txtAddCerca, javax.swing.GroupLayout.Alignment.LEADING)))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel32)
                    .addComponent(txtArmazonCerca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel28)
                    .addComponent(txtCristalCerca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel40)
                    .addComponent(txtAddCerca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(7, 7, 7)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel33)
                    .addComponent(txtODCercaESF, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtODCercaCIL, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel35)
                    .addComponent(txtODCercaA, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel34)
                    .addComponent(jLabel29))
                .addGap(11, 11, 11)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel36)
                    .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtOICercaESF, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(txtOICercaCIL, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(txtOICercaA, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel37)
                        .addComponent(jLabel38)
                        .addComponent(jLabel30)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jLabel39)
                        .addComponent(txtDPCerca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(chkEndurecidoCerca)
                        .addComponent(chkCapaCerca))
                    .addComponent(chkPlusMaxCerca)))
        );

        jPanel4.setBackground(new java.awt.Color(255, 255, 255));
        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Doctor", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe Print", 0, 11))); // NOI18N

        jLabel23.setText("Nombre");

        txtDoctor.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtDoctorFocusLost(evt);
            }
        });

        lblRutDoctor.setText("0");

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addComponent(jLabel23)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(txtDoctor))
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addComponent(lblRutDoctor)
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel23)
                    .addComponent(txtDoctor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(lblRutDoctor))
        );

        jPanel6.setBackground(new java.awt.Color(255, 255, 255));
        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Observaciones", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe Print", 0, 11))); // NOI18N

        txtObs.setColumns(20);
        txtObs.setRows(5);
        jScrollPane1.setViewportView(txtObs);

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1))
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        jPanel7.setBackground(new java.awt.Color(255, 255, 255));
        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Precio", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe Print", 0, 11))); // NOI18N

        jLabel24.setText("Valor total");

        jLabel25.setText("Abono");

        txtAbono.setModel(new javax.swing.SpinnerNumberModel(0, 0, 9999999, 1));
        txtAbono.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                txtAbonoStateChanged(evt);
            }
        });

        cboTipoPago.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        cboTipoPago.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cboTipoPagoItemStateChanged(evt);
            }
        });

        jLabel27.setText("Saldo");

        chkDescuento.setText("Aplicar descuento");
        chkDescuento.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                chkDescuentoFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                chkDescuentoFocusLost(evt);
            }
        });
        chkDescuento.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                chkDescuentoMouseClicked(evt);
            }
        });
        chkDescuento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                chkDescuentoActionPerformed(evt);
            }
        });
        chkDescuento.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                chkDescuentoKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                chkDescuentoKeyTyped(evt);
            }
        });

        cboDescuento.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        cboDescuento.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cboDescuentoItemStateChanged(evt);
            }
        });

        lblDescuento.setText("Dscto");

        txtSaldo.setEditable(false);
        txtSaldo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtSaldoActionPerformed(evt);
            }
        });
        txtSaldo.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                txtSaldoPropertyChange(evt);
            }
        });

        txtDescuento.setEditable(false);
        txtDescuento.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                txtDescuentoPropertyChange(evt);
            }
        });

        lblIdDescuento.setText("0");

        lblCristalLejos.setText("0");

        lblCristalCerca.setText("0");

        lblLenteCerca.setText("0");

        lblLenteLejos.setText("0");

        txtTotal.setEditable(false);
        txtTotal.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtTotalActionPerformed(evt);
            }
        });
        txtTotal.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                txtTotalPropertyChange(evt);
            }
        });

        javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);
        jPanel7.setLayout(jPanel7Layout);
        jPanel7Layout.setHorizontalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addComponent(chkDescuento)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(cboDescuento, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel24)
                            .addComponent(jLabel25)
                            .addComponent(jLabel27))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED, 26, Short.MAX_VALUE)
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtAbono, javax.swing.GroupLayout.PREFERRED_SIZE, 134, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtSaldo, javax.swing.GroupLayout.PREFERRED_SIZE, 118, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtTotal, javax.swing.GroupLayout.PREFERRED_SIZE, 117, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(jPanel7Layout.createSequentialGroup()
                                .addComponent(lblDescuento)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtDescuento))
                            .addComponent(cboTipoPago, javax.swing.GroupLayout.PREFERRED_SIZE, 114, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel7Layout.createSequentialGroup()
                                .addComponent(lblIdDescuento)
                                .addGap(18, 18, 18)
                                .addComponent(lblCristalLejos)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(lblCristalCerca)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(lblLenteCerca)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(lblLenteLejos)))))
                .addGap(27, 27, 27))
        );
        jPanel7Layout.setVerticalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(chkDescuento)
                    .addComponent(cboDescuento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel24)
                    .addComponent(lblDescuento)
                    .addComponent(txtDescuento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtTotal, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel25)
                    .addComponent(txtAbono, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(cboTipoPago, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel27)
                    .addComponent(txtSaldo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblIdDescuento)
                    .addComponent(lblCristalLejos)
                    .addComponent(lblCristalCerca)
                    .addComponent(lblLenteCerca)
                    .addComponent(lblLenteLejos))
                .addContainerGap(14, Short.MAX_VALUE))
        );

        jPanel8.setBackground(new java.awt.Color(255, 255, 255));
        jPanel8.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe Print", 0, 11))); // NOI18N

        btnGuardar.setBackground(new java.awt.Color(153, 255, 153));
        btnGuardar.setFont(new java.awt.Font("Aharoni", 0, 14)); // NOI18N
        btnGuardar.setForeground(new java.awt.Color(0, 0, 51));
        btnGuardar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/botonGraph/btnInfo1.jpg"))); // NOI18N
        btnGuardar.setText("Guardar");
        btnGuardar.setBorder(null);
        btnGuardar.setBorderPainted(false);
        btnGuardar.setContentAreaFilled(false);
        btnGuardar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnGuardar.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnGuardar.setIconTextGap(-3);
        btnGuardar.setPressedIcon(new javax.swing.ImageIcon(getClass().getResource("/botonGraph/btnInfo3.jpg"))); // NOI18N
        btnGuardar.setRolloverIcon(new javax.swing.ImageIcon(getClass().getResource("/botonGraph/btnInfo2.jpg"))); // NOI18N
        btnGuardar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGuardarActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel8Layout = new javax.swing.GroupLayout(jPanel8);
        jPanel8.setLayout(jPanel8Layout);
        jPanel8Layout.setHorizontalGroup(
            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel8Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(btnGuardar, javax.swing.GroupLayout.PREFERRED_SIZE, 131, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(103, 103, 103))
        );
        jPanel8Layout.setVerticalGroup(
            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel8Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(btnGuardar)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jPanel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jPanel7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jPanel8, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jPanel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jPanel8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(237, 237, 237))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void txtInstitucionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtInstitucionActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtInstitucionActionPerformed

    private void btnGuardarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGuardarActionPerformed
        //validado: validar si esta seleccionado el checbox descuento y ssi estan seleccionados los combobox descuento 
        //valilado: validar si esta seleccionado el combobox tipo pago
        //validado: que el saldo sea mayor que cero
        //validado: validar que los JTextField necesarios tengan datos.
        FnValidaRut vr = new FnValidaRut();
        calcularSaldo();
        
        //VARIABLES PARA LA FICHA
        int idDescuento = 0;
        Descuento dscto = null;
        int idTipoPago = Integer.parseInt(this.lblIdTipoPago.getText());
        if(idTipoPago==0){
            JOptionPane.showMessageDialog(null, "Error, Debe seleccionsr un tipo de pago","Selecciona tipo de pago",JOptionPane.INFORMATION_MESSAGE);
            return;
        }
        int idInstitucion = Integer.parseInt(lblIdInstitucion.getText());
        int idFicha =0;
        try {
            idFicha = load.obtenerFolio();
        } catch (SQLException ex) {
            JOptionPane.showMessageDialog(null, "Error desconocido, Detalles: "+ex.getMessage(),"Error al cargar numero de folio",JOptionPane.WARNING_MESSAGE);
            return;
        } catch (ClassNotFoundException ex) {
            JOptionPane.showMessageDialog(null, "Error desconocido, Detalles: "+ex.getMessage(),"Error al cargar numero de folio",JOptionPane.WARNING_MESSAGE);
            return;
        }
        
        if(vr.validarRut(txtRutCliente.getText())){
            
            try {
                int id = load.obtenerFolio();
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(null, "Error inesperado: "+ex.getMessage(),"Error al obtener numero de folio", JOptionPane.WARNING_MESSAGE);
                return;
            } catch (ClassNotFoundException ex) {
                JOptionPane.showMessageDialog(null, "Error inesperado: "+ex.getMessage(),"Error al obtener numero de folio", JOptionPane.WARNING_MESSAGE);
                return;
            }
            String rutCliente = txtRutCliente.getText();
            String rutDoctor = lblRutDoctor.getText();
            Date fecha = new Date();
            Date fechaEntrega = txtFecha.getDate();
            String lugarEntrega = txtEntrega.getText();
            int hora = (int) txtHora.getValue();
            int min = (int) txtMinuto.getValue();
            
            if(fechaEntrega == null || lugarEntrega.length() < 3 || hora == 0){
                JOptionPane.showMessageDialog(null, "Debe ingresar datos de entrega.","Faltan datos",JOptionPane.INFORMATION_MESSAGE);
                return;
            }
            String h = "";
            String m = "";
            if(hora < 10)
                h = "0";
            if(min < 10)
                m = "0";
            String horaEntrega = h+txtHora.getValue()+":"+m+txtMinuto.getValue();
            int total = Integer.parseInt(txtTotal.getText());
            int saldo = Integer.parseInt(txtSaldo.getText().replace("$ ",""));
            String obs = txtObs.getText();
            int estado = 1;//pendiente
            if(saldo == 0)
                estado = 2;//pagado
            if(saldo < 0){
                JOptionPane.showMessageDialog(null, "El abono ingresado no es correcto", "Corrija los datos", JOptionPane.WARNING_MESSAGE);
                return;
            }
            if(chkDescuento.isSelected()){
                idDescuento = Integer.parseInt(lblIdDescuento.getText());
                try {
                    dscto = load.cargarDescuento(idDescuento);
                } catch (SQLException ex) {
                    JOptionPane.showMessageDialog(null, "No se pudo cargar descuento, Detalles: "+ex.getMessage(),"Error al cargar descuento",JOptionPane.WARNING_MESSAGE);
                    return;
                } catch (ClassNotFoundException ex) {
                    JOptionPane.showMessageDialog(null, "No se pudo cargar descuento, Detalles: "+ex.getMessage(),"Error al cargar descuento",JOptionPane.WARNING_MESSAGE);
                    return;
                }
            }
            int despacho = 0;//no se encuentra despachado
            Cliente cliente = null;
            try {
                //validar si cliente existe, si no existe guardar, si existe modificar
                cliente = load.cargarCliente(rutCliente);
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(null, "Error inesperado: "+ex.getMessage(),"Error al obtener cliente", JOptionPane.WARNING_MESSAGE);
                return;
            } catch (ClassNotFoundException ex) {
                JOptionPane.showMessageDialog(null, "Error inesperado: "+ex.getMessage(),"Error al obtener cliente", JOptionPane.WARNING_MESSAGE);
                return;
            }
            
            //crear armazon lejos
            Armazon lejos = new Armazon();
            if(chkCapaLejos.isSelected())
                lejos.setCapa(1);
            else
                lejos.setCapa(0);
            lejos.setCristal(txtCristalLejos.getText());
           
            lejos.setDp((int) txtDPLejos.getValue());
            if(chkEndurecidoLejos.isSelected())
                lejos.setEndurecido(1);
            else
                lejos.setEndurecido(0);
            lejos.setMarca(txtArmazonLejos.getText());
            lejos.setIdFicha(idFicha);
            lejos.setOdA(txtODLejosA.getText());
            lejos.setOdCil(txtODLejosCIL.getText());
            lejos.setOdEsf(txtODLejosESF.getText());
            lejos.setOiA(txtOILejosA.getText());
            lejos.setOiCil(txtOILejosCIL.getText());
            lejos.setOiEsf(txtOILejosESF.getText());
            if(chkPlusMaxLejos.isSelected())
                lejos.setPlusMax(1);
            else
                lejos.setPlusMax(0);
            lejos.setTipo(1);
            
            
            //crear armazon cerca
            Armazon cerca = new Armazon();
            cerca.setAdd(txtAddCerca.getText());
            if(chkCapaCerca.isSelected())
                cerca.setCapa(1);
            else
                cerca.setCapa(0);
            cerca.setCristal(txtCristalCerca.getText());
            cerca.setDp((int) txtDPCerca.getValue());
            if(chkEndurecidoCerca.isSelected())
                cerca.setEndurecido(1);
            else
                cerca.setEndurecido(0);
            cerca.setMarca(txtArmazonCerca.getText());
            cerca.setIdFicha(idFicha);
            cerca.setOdA(txtODCercaA.getText());
            cerca.setOdCil(txtODCercaCIL.getText());
            cerca.setOdEsf(txtODCercaESF.getText());
            cerca.setOiA(txtOICercaA.getText());
            cerca.setOiCil(txtOICercaCIL.getText());
            cerca.setOiEsf(txtOICercaESF.getText());
            if(chkPlusMaxCerca.isSelected())
                cerca.setPlusMax(1);
            else
                cerca.setPlusMax(0);
            cerca.setTipo(0);
            
            if((cerca.getCristal().length()<1 && lejos.getCristal().length() < 1) || (cerca.getMarca().length() < 1 && lejos.getMarca().length() < 1)){
                JOptionPane.showMessageDialog(null, "Debe agregar al menos un armazón a la ficha", "Faltan valores", JOptionPane.INFORMATION_MESSAGE);
                return;
            }
            
            //crear historial de pago
            int abono = (int) txtAbono.getValue();
            if(abono > 0 && cboTipoPago.getSelectedIndex() == 0){
                int respAbono = JOptionPane.showConfirmDialog(null, "¿Desea seleccionar un tipo de pago para el abono?", "Tipo de pago no seleccionado", JOptionPane.YES_NO_OPTION);
                if(respAbono == JOptionPane.YES_OPTION){
                    return;
                }
            }
            HistorialPago hp = null;
            if(abono < 1){
                int respAbono2 = JOptionPane.showConfirmDialog(null, "¿Desea registrar un abono?", "Abono no ingresado", JOptionPane.YES_NO_OPTION);
                if(respAbono2 == JOptionPane.YES_OPTION){
                    return;
                }
            }else{
                hp = new HistorialPago(0, fecha,abono, 1, idTipoPago, idFicha);
            }
            
            
            try {
                //actualizar ficha_actual en info
                Doctor dr = load.cargarDoctorRut(rutDoctor);
                Institucion ins = load.cargarInstitucionId(idInstitucion);

                Ficha ficha = new Ficha();
                ficha.setCerca(cerca);
                ficha.setCliente(cliente);
                ficha.setDescuento(dscto);
                ficha.setDespacho(null);
                ficha.setDoctor(dr);
                ficha.setEstado(estado);
                ficha.setFecha(fecha);
                ficha.setFechaEntrega(fechaEntrega);
                ficha.setHoraEntrega(horaEntrega);
                ficha.setId(idFicha);
                ficha.setInstitucion(ins);
                ficha.setLejos(lejos);
                ficha.setLugarEntrega(lugarEntrega);
                ficha.setObservacion(obs);
                ficha.setSaldo(saldo);
                ficha.setValorTotal(total);
                
                if(cliente != null){
                    cliente.setCiudad(txtCiudad.getText());
                    cliente.setComuna(txtComuna.getText());
                    cliente.setDireccion(txtDireccionCliente.getText());
                    cliente.setEdad((int)txtEdad.getValue());
                    cliente.setEmail(txtMailCliente.getText());
                    cliente.setNombre(txtNombreCliente.getText());
                    cliente.setSexo(cboSexo.getSelectedIndex());
                    cliente.setTelefono(txtTelefonoCliente.getText());
                    //actualizar
                    if(!load.actualizarCliente(cliente)){
                        JOptionPane.showMessageDialog(null, "No se pudo completar la operación [1100]", "Error al guardar Ficha",JOptionPane.WARNING_MESSAGE);
                        return;
                    }
                }else{
                    cliente = new Cliente();
                    cliente.setRut(txtRutCliente.getText());
                    cliente.setCiudad(txtCiudad.getText());
                    cliente.setComuna(txtComuna.getText());
                    cliente.setDireccion(txtDireccionCliente.getText());
                    cliente.setEdad((int)txtEdad.getValue());
                    cliente.setEmail(txtMailCliente.getText());
                    cliente.setNombre(txtNombreCliente.getText());
                    cliente.setSexo(cboSexo.getSelectedIndex());
                    cliente.setTelefono(txtTelefonoCliente.getText());
                    cliente.setEstado(1);
                    ficha.setCliente(cliente);
                    //guardar
                    if(!load.guardarCliente(cliente)){
                        JOptionPane.showMessageDialog(null, "No se pudo completar la operación [1102]", "Error al guardar Ficha",JOptionPane.WARNING_MESSAGE);
                        return;
                    }
                }
                
                int resp = JOptionPane.showConfirmDialog(null, "¿Esta seguro que los datos ingresados están correctos?", "Guardar Ficha", JOptionPane.YES_NO_OPTION);
                if(resp == JOptionPane.YES_OPTION){
                    if(load.actualizarFolio(idFicha)){
                        //Guardar valores en BD
                        
                        //guardar armazones
                        if(!load.guardarArmazon(ficha.getCerca())){
                            JOptionPane.showMessageDialog(null, "No se pudo completar la operación [1104]", "Error al guardar Ficha",JOptionPane.WARNING_MESSAGE);
                            return;
                        }
                        if(!load.guardarArmazon(ficha.getLejos())){
                            JOptionPane.showMessageDialog(null, "No se pudo completar la operación [1106]", "Error al guardar Ficha",JOptionPane.WARNING_MESSAGE);
                            return;
                        }   
                        //guardar historial de pago
                        if(!load.guardarHitorialPago(hp) && abono > 0){
                            JOptionPane.showMessageDialog(null, "No se pudo completar la operación [1108]", "Error al guardar Ficha",JOptionPane.WARNING_MESSAGE);
                            return;
                        }
                        //descontar de inventario
                        if(load.cargarLente(ficha.getCerca().getMarca()) != null){//prgunta si existe un lente con los datos ingresados para poder descontar stock
                            if(!load.descontarStock(ficha.getCerca().getMarca())){
                                JOptionPane.showMessageDialog(null, "No se pudo completar la operación [1110]", "Error al guardar Ficha",JOptionPane.WARNING_MESSAGE);
                                return;
                            }
                        }
                        if(load.cargarLente(ficha.getLejos().getMarca()) != null){//prgunta si existe un lente con los datos ingresados para poder descontar stock
                            if(!load.descontarStock(ficha.getLejos().getMarca())){
                                JOptionPane.showMessageDialog(null, "No se pudo completar la operación [1112]", "Error al guardar Ficha",JOptionPane.WARNING_MESSAGE);
                                return;
                            }
                        }    
                            
                        //guardar ficha
                        int idSesion = Integer.parseInt(ContentAdmin.idSesion.getText());
                        
                        
                        if(load.guardarFicha(ficha,idSesion)){
                            load.imprimir(ficha);
                            limpiarDatos();
                            return;
                        }
                        JOptionPane.showMessageDialog(null, "No se pudo completar la operación [1114]", "Error al guardar Ficha",JOptionPane.WARNING_MESSAGE);
                        return;
                    }else{
                        JOptionPane.showMessageDialog(null, "Error de comunicación con la base de datos","Error al guardar Ficha",JOptionPane.WARNING_MESSAGE);
                    }
                }else{
                    return;
                }
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(null, "Error de comunicación con la base de datos, Detalle: "+ex.getMessage(),"Error al guardar Ficga",JOptionPane.WARNING_MESSAGE);
                return;
            } catch (ClassNotFoundException ex) {
                JOptionPane.showMessageDialog(null, "Error de comunicación con la base de datos, Detalle: "+ex.getMessage(),"Error al guardar Ficga",JOptionPane.WARNING_MESSAGE);
                return;
            }
        }else{
            JOptionPane.showMessageDialog(null, "El rut ingresado del cliente no existe", "Error de Rut",JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_btnGuardarActionPerformed

    private void txtRutClienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtRutClienteActionPerformed
        
    }//GEN-LAST:event_txtRutClienteActionPerformed

    private void txtRutClienteKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtRutClienteKeyTyped
        int largo = 10;
        
        String rutCliente = txtRutCliente.getText();
        Cliente temp = new Cliente();
        try {
            temp = load.cargarCliente(rutCliente);
            if(temp != null){
                txtNombreCliente.setText(temp.getNombre());
                txtTelefonoCliente.setText(temp.getTelefono());
                txtMailCliente.setText(temp.getEmail());
                txtDireccionCliente.setText(temp.getDireccion());
                txtComuna.setText(temp.getComuna());
                txtCiudad.setText(temp.getCiudad());
                cboSexo.setSelectedIndex(temp.getSexo());
                txtEdad.setValue((int) temp.getEdad());
            }
        } catch (SQLException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        }
            
    }//GEN-LAST:event_txtRutClienteKeyTyped

    private void txtRutClienteFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtRutClienteFocusLost
        String rutCliente = txtRutCliente.getText();
        Cliente temp = new Cliente();
        try {
            temp = load.cargarCliente(rutCliente);
            if(temp != null){
                txtNombreCliente.setText(temp.getNombre());
                txtTelefonoCliente.setText(temp.getTelefono());
                txtMailCliente.setText(temp.getEmail());
                txtDireccionCliente.setText(temp.getDireccion());
                txtComuna.setText(temp.getComuna());
                txtCiudad.setText(temp.getCiudad());
                cboSexo.setSelectedIndex(temp.getSexo());
                txtEdad.setValue((int) temp.getEdad());
            }else{
                txtNombreCliente.setText("");
                txtTelefonoCliente.setText("");
                txtMailCliente.setText("");
                txtDireccionCliente.setText("");
                txtComuna.setText("");
                txtCiudad.setText("");
                cboSexo.setSelectedIndex(0);
                txtEdad.setValue(0);
            }
        } catch (SQLException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_txtRutClienteFocusLost

    private void txtInstitucionFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtInstitucionFocusLost
        String nombre = txtInstitucion.getText();
        int idInstitucion = 0;
        try {
            if(load.cargarInstitucion(nombre) != null){
                idInstitucion = load.cargarInstitucion(nombre).getId();
                txtInstitucion.setForeground(Color.black);
            }else{
                txtInstitucion.setForeground(Color.red);
            }
            lblIdInstitucion.setText(""+idInstitucion);
        } catch (SQLException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_txtInstitucionFocusLost

    private void txtDoctorFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtDoctorFocusLost
        String nombre = txtDoctor.getText();
        String rutDoctor = "";
        try {
            if(load.cargarDoctor(nombre) != null){
                rutDoctor = load.cargarDoctor(nombre).getRut();
                txtDoctor.setForeground(Color.black);
            }else{
                txtDoctor.setForeground(Color.red);
            }
            lblRutDoctor.setText(rutDoctor);
        } catch (SQLException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_txtDoctorFocusLost

    private void chkDescuentoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_chkDescuentoKeyPressed
        if(chkDescuento.isSelected())
            cboDescuento.setVisible(true);
        else
            cboDescuento.setVisible(false);
    }//GEN-LAST:event_chkDescuentoKeyPressed

    private void chkDescuentoFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_chkDescuentoFocusLost
        
    }//GEN-LAST:event_chkDescuentoFocusLost

    private void chkDescuentoFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_chkDescuentoFocusGained
      
    }//GEN-LAST:event_chkDescuentoFocusGained

    private void chkDescuentoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_chkDescuentoKeyTyped
        
    }//GEN-LAST:event_chkDescuentoKeyTyped

    private void chkDescuentoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_chkDescuentoMouseClicked
       
        calcularSaldo();
        if(chkDescuento.isSelected()){
           cboDescuento.setVisible(true);
           lblDescuento.setVisible(true);
           txtDescuento.setVisible(true);
       }
        if(!chkDescuento.isSelected()){
            cboDescuento.setSelectedIndex(0);
            cboDescuento.setVisible(false);
            lblDescuento.setVisible(false);
            txtDescuento.setVisible(false);
            
        }
            
    }//GEN-LAST:event_chkDescuentoMouseClicked

    private void txtAbonoStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_txtAbonoStateChanged
        calcularSaldo();
    }//GEN-LAST:event_txtAbonoStateChanged

    private void txtSaldoPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_txtSaldoPropertyChange
        txtSaldo.setHorizontalAlignment(4);
    }//GEN-LAST:event_txtSaldoPropertyChange

    private void txtDescuentoPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_txtDescuentoPropertyChange
        txtDescuento.setHorizontalAlignment(4);
    }//GEN-LAST:event_txtDescuentoPropertyChange

    private void cboDescuentoItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cboDescuentoItemStateChanged
        calcularSaldo();
    }//GEN-LAST:event_cboDescuentoItemStateChanged

    private void cboTipoPagoItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cboTipoPagoItemStateChanged
        
        String nombre = (String) cboTipoPago.getSelectedItem();
        TipoPago tp = null;
        try {
            tp = load.buscarTipoPago(nombre);
        } catch (SQLException ex) {
            JOptionPane.showMessageDialog(null, "Error inesparado: "+ex);
        } catch (ClassNotFoundException ex) {
            JOptionPane.showMessageDialog(null, "Error inesparado: "+ex);
        }
        if(tp != null){
            this.lblIdTipoPago.setText(""+tp.getId());
        }else{
            this.lblIdTipoPago.setText("0");
        }
        
    }//GEN-LAST:event_cboTipoPagoItemStateChanged

    private void txtODCercaESFActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtODCercaESFActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtODCercaESFActionPerformed

    private void txtSaldoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtSaldoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtSaldoActionPerformed

    private void chkDescuentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_chkDescuentoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_chkDescuentoActionPerformed

    private void txtInstitucionKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtInstitucionKeyTyped
        int largo = 45;
        if(txtInstitucion.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "La institucion solo debe contener hasta 45 caracteres", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtInstitucionKeyTyped

    private void txtNombreClienteKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtNombreClienteKeyTyped
        int largo = 45;
        if(txtNombreCliente.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "El nombre debe contener hasta 45 caracteres", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtNombreClienteKeyTyped

    private void txtTelefonoClienteKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtTelefonoClienteKeyTyped
        int largo = 12;
        if(txtTelefonoCliente.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "El teléfono debe contener hasta 12 caracteres", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtTelefonoClienteKeyTyped

    private void txtMailClienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtMailClienteActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtMailClienteActionPerformed

    private void txtMailClienteKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtMailClienteKeyTyped
        int largo = 45;
        if(txtMailCliente.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "El email debe contener hasta 45 caracteres", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtMailClienteKeyTyped

    private void txtDireccionClienteKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtDireccionClienteKeyTyped
        int largo = 45;
        if(txtDireccionCliente.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "La dirección debe contener hasta 45 caracteres", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtDireccionClienteKeyTyped

    private void txtComunaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtComunaKeyTyped
        int largo = 45;
        if(txtComuna.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "La comuna debe contener hasta 45 caracteres", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtComunaKeyTyped

    private void txtCiudadKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtCiudadKeyTyped
        int largo = 45;
        if(txtCiudad.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "La ciudad debe contener hasta 45 caracteres", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtCiudadKeyTyped

    private void txtArmazonLejosKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtArmazonLejosKeyTyped
        int largo = 45;
        if(txtArmazonLejos.getText().length() >= largo){
            evt.consume();
        }
    }//GEN-LAST:event_txtArmazonLejosKeyTyped

    private void txtCristalLejosKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtCristalLejosKeyTyped
        int largo = 45;
        if(txtCristalLejos.getText().length() >= largo){
            evt.consume();
            
        }
    }//GEN-LAST:event_txtCristalLejosKeyTyped

    private void txtODLejosESFKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtODLejosESFKeyTyped
        int largo = 45;
        if(txtODLejosESF.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtODLejosESFKeyTyped

    private void txtODLejosCILKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtODLejosCILKeyTyped
        int largo = 45;
        if(txtODLejosCIL.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtODLejosCILKeyTyped

    private void txtODLejosAKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtODLejosAKeyTyped
        int largo = 45;
        if(txtODLejosA.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtODLejosAKeyTyped

    private void txtOILejosESFKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtOILejosESFKeyTyped
        int largo = 45;
        if(txtOILejosESF.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtOILejosESFKeyTyped

    private void txtOILejosCILKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtOILejosCILKeyTyped
        int largo = 45;
        if(txtOILejosESF.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtOILejosCILKeyTyped

    private void txtOILejosAKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtOILejosAKeyTyped
        int largo = 45;
        if(txtOILejosA.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtOILejosAKeyTyped

    private void txtArmazonCercaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtArmazonCercaKeyTyped
        int largo = 45;
        if(txtArmazonCerca.getText().length() >= largo){
            evt.consume();
            
        }
    }//GEN-LAST:event_txtArmazonCercaKeyTyped

    private void txtCristalCercaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtCristalCercaKeyTyped
        int largo = 45;
        if(txtCristalCerca.getText().length() >= largo){
            evt.consume();
            
        }
    }//GEN-LAST:event_txtCristalCercaKeyTyped

    private void txtAddCercaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtAddCercaKeyTyped
        int largo = 45;
        if(txtAddCerca.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtAddCercaKeyTyped

    private void txtODCercaESFKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtODCercaESFKeyTyped
        int largo = 45;
        if(txtODCercaESF.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtODCercaESFKeyTyped

    private void txtODCercaCILKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtODCercaCILKeyTyped
        int largo = 45;
        if(txtODCercaCIL.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtODCercaCILKeyTyped

    private void txtODCercaAKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtODCercaAKeyTyped
        int largo = 45;
        if(txtODCercaA.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtODCercaAKeyTyped

    private void txtOICercaESFKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtOICercaESFKeyTyped
        int largo = 45;
        if(txtOICercaESF.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtOICercaESFKeyTyped

    private void txtOICercaCILKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtOICercaCILKeyTyped
        int largo = 45;
        if(txtOICercaCIL.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtOICercaCILKeyTyped

    private void txtOICercaAKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtOICercaAKeyTyped
        int largo = 45;
        if(txtOICercaA.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtOICercaAKeyTyped

    private void txtEntregaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtEntregaKeyTyped
        int largo = 45;
        if(txtEntrega.getText().length() >= largo){
            evt.consume();
            JOptionPane.showMessageDialog(null, "Datos mal ingresados", "Error de ingreso de datos", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtEntregaKeyTyped

    private void txtCristalLejosFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtCristalLejosFocusLost

        try {
            Cristal cristal = load.cargarCristal(txtCristalLejos.getText());
            if(cristal != null){
                lblCristalLejos.setText(""+cristal.getPrecio());
                txtCristalLejos.setForeground(Color.black);
            }else{
                lblCristalLejos.setText("0");
                txtCristalLejos.setForeground(Color.red);
            }
            calcularTotal();
        } catch (SQLException | ClassNotFoundException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_txtCristalLejosFocusLost

    private void txtCristalCercaFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtCristalCercaFocusLost
        
        try {
            Cristal cristal = load.cargarCristal(txtCristalCerca.getText());
            if(cristal != null){
                lblCristalCerca.setText(""+cristal.getPrecio());
                txtCristalCerca.setForeground(Color.black);
            }else{
                lblCristalCerca.setText("0");
                txtCristalCerca.setForeground(Color.red);
            }
            calcularTotal();
        } catch (SQLException | ClassNotFoundException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_txtCristalCercaFocusLost

    private void txtTotalActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtTotalActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtTotalActionPerformed

    private void txtTotalPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_txtTotalPropertyChange
        txtTotal.setHorizontalAlignment(4);
    }//GEN-LAST:event_txtTotalPropertyChange

    private void txtArmazonLejosFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtArmazonLejosFocusLost
        try {
            System.out.println("view 1855 focuslost lejos");
            Lente lente = load.cargarLente(txtArmazonLejos.getText());
            if(lente != null){
                
                lblLenteLejos.setText(""+lente.getPrecioAct());
                txtArmazonLejos.setForeground(Color.black);
                
            }else{
                lblLenteLejos.setText("0");
                txtArmazonLejos.setForeground(Color.red);
            }
            calcularTotal();
        } catch (SQLException | ClassNotFoundException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_txtArmazonLejosFocusLost

    private void txtArmazonCercaFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtArmazonCercaFocusLost
        try {
            Lente lente = load.cargarLente(txtArmazonCerca.getText());
            if(lente != null){
                
                lblLenteCerca.setText(""+lente.getPrecioAct());
                txtArmazonCerca.setForeground(Color.black);
                
            }else{
                lblLenteCerca.setText("0");
                txtArmazonCerca.setForeground(Color.red);
            }
            calcularTotal();
        } catch (SQLException | ClassNotFoundException ex) {
            Logger.getLogger(VNuevaFicha.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_txtArmazonCercaFocusLost


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnGuardar;
    private javax.swing.JComboBox<String> cboDescuento;
    private javax.swing.JComboBox<String> cboSexo;
    private javax.swing.JComboBox<String> cboTipoPago;
    private javax.swing.JCheckBox chkCapaCerca;
    private javax.swing.JCheckBox chkCapaLejos;
    private javax.swing.JCheckBox chkDescuento;
    private javax.swing.JCheckBox chkEndurecidoCerca;
    private javax.swing.JCheckBox chkEndurecidoLejos;
    private javax.swing.JCheckBox chkPlusMaxCerca;
    private javax.swing.JCheckBox chkPlusMaxLejos;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel28;
    private javax.swing.JLabel jLabel29;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel30;
    private javax.swing.JLabel jLabel31;
    private javax.swing.JLabel jLabel32;
    private javax.swing.JLabel jLabel33;
    private javax.swing.JLabel jLabel34;
    private javax.swing.JLabel jLabel35;
    private javax.swing.JLabel jLabel36;
    private javax.swing.JLabel jLabel37;
    private javax.swing.JLabel jLabel38;
    private javax.swing.JLabel jLabel39;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel40;
    private javax.swing.JLabel jLabel41;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel lblCristalCerca;
    private javax.swing.JLabel lblCristalLejos;
    private javax.swing.JLabel lblDescuento;
    private javax.swing.JLabel lblIdDescuento;
    private javax.swing.JLabel lblIdInstitucion;
    private javax.swing.JLabel lblLenteCerca;
    private javax.swing.JLabel lblLenteLejos;
    private javax.swing.JLabel lblRutDoctor;
    private javax.swing.JSpinner txtAbono;
    private javax.swing.JTextField txtAddCerca;
    private javax.swing.JTextField txtArmazonCerca;
    private javax.swing.JTextField txtArmazonLejos;
    private javax.swing.JTextField txtCiudad;
    private javax.swing.JTextField txtComuna;
    private javax.swing.JTextField txtCristalCerca;
    private javax.swing.JTextField txtCristalLejos;
    private javax.swing.JSpinner txtDPCerca;
    private javax.swing.JSpinner txtDPLejos;
    private javax.swing.JTextField txtDescuento;
    private javax.swing.JTextField txtDireccionCliente;
    private javax.swing.JTextField txtDoctor;
    private javax.swing.JSpinner txtEdad;
    private javax.swing.JTextField txtEntrega;
    private com.toedter.calendar.JDateChooser txtFecha;
    private javax.swing.JSpinner txtHora;
    private javax.swing.JTextField txtInstitucion;
    private javax.swing.JTextField txtMailCliente;
    private javax.swing.JSpinner txtMinuto;
    private javax.swing.JTextField txtNombreCliente;
    private javax.swing.JTextField txtODCercaA;
    private javax.swing.JTextField txtODCercaCIL;
    private javax.swing.JTextField txtODCercaESF;
    private javax.swing.JTextField txtODLejosA;
    private javax.swing.JTextField txtODLejosCIL;
    private javax.swing.JTextField txtODLejosESF;
    private javax.swing.JTextField txtOICercaA;
    private javax.swing.JTextField txtOICercaCIL;
    private javax.swing.JTextField txtOICercaESF;
    private javax.swing.JTextField txtOILejosA;
    private javax.swing.JTextField txtOILejosCIL;
    private javax.swing.JTextField txtOILejosESF;
    private javax.swing.JTextArea txtObs;
    private javax.swing.JTextField txtRutCliente;
    private javax.swing.JTextField txtSaldo;
    private javax.swing.JTextField txtTelefonoCliente;
    private javax.swing.JTextField txtTotal;
    // End of variables declaration//GEN-END:variables

    private void cargarCbos() throws SQLException, ClassNotFoundException {
        cboSexo.removeAllItems();
        cboSexo.addItem("Sin Seleccionar");
        cboSexo.addItem("Femenino");
        cboSexo.addItem("Masculino");
        
        txtSaldo.setEditable(false);
        txtDescuento.setEditable(false);
        lblIdInstitucion.setVisible(false);
        lblRutDoctor.setVisible(false);
        lblDescuento.setVisible(false);
        txtDescuento.setVisible(false);
        lblIdTipoPago.setVisible(false);
        lblIdDescuento.setVisible(false);
        
        cboDescuento.setVisible(false);
        cboDescuento.removeAllItems();
        cboDescuento.addItem("Sin descuento");
        int contDscto = 0;
        for (Descuento temp : load.listaDescuento()) {
            cboDescuento.addItem(temp.getNombre()+" ("+temp.getPorcetange()+"%)");
            contDscto++;
        }
        if(contDscto > 0)
            cboDescuento.setSelectedIndex(1);
        
        cboTipoPago.removeAllItems();
        cboTipoPago.addItem("Seleccione");
        for (TipoPago temp : load.listaTipoPago()) {
            cboTipoPago.addItem(temp.getNombre());
        }
        lblIdInstitucion.setText("0");
        lblRutDoctor.setText("0");
        
        chkCapaCerca.setSelected(false);
        chkCapaLejos.setSelected(false);
        chkDescuento.setSelected(false);
        chkEndurecidoCerca.setSelected(false);
        chkEndurecidoLejos.setSelected(false);
        chkPlusMaxCerca.setSelected(false);
        chkPlusMaxLejos.setSelected(false);
        cboDescuento.setVisible(false);
    }

    private void autocompletar() throws SQLException, ClassNotFoundException {
        TextAutoCompleter textAutoCompleter = new TextAutoCompleter(txtInstitucion);
        textAutoCompleter.setMode(0);
        for (Institucion temp : load.listarInstituciones()) {
            textAutoCompleter.addItem(temp.getNombre());
            textAutoCompleter.setMode(0);
        }
        
        TextAutoCompleter textAutoCompleter2 = new TextAutoCompleter(txtRutCliente);
        for (Cliente temp : load.listarClientes()) {
            textAutoCompleter2.addItem(temp.getRut());
            textAutoCompleter2.setMode(0);
        }
        
        TextAutoCompleter textAutoCompleter3 = new TextAutoCompleter(txtDoctor);
        for (Doctor temp : load.listarDoctores()) {
            textAutoCompleter3.addItem(temp.getNombre());
            textAutoCompleter3.setMode(0);
        }
        
        TextAutoCompleter textAutoCompleter4 = new TextAutoCompleter(txtCristalCerca);
        for (Cristal temp : load.listarCristales()) {
            textAutoCompleter4.addItem(temp.getNombre());
            textAutoCompleter4.setMode(0);
        }
        
        TextAutoCompleter textAutoCompleter5 = new TextAutoCompleter(txtCristalLejos);
        for (Cristal temp : load.listarCristales()) {
            textAutoCompleter5.addItem(temp.getNombre());
            textAutoCompleter5.setMode(0);
        }
        
        TextAutoCompleter textAutoCompleter6 = new TextAutoCompleter(txtArmazonCerca);
        for (Lente temp : load.listarLentesConStock()) {
            textAutoCompleter6.addItem(temp.getCodigo());
            textAutoCompleter6.setMode(0);
        }
        
        TextAutoCompleter textAutoCompleter7 = new TextAutoCompleter(txtArmazonLejos);
        for (Lente temp : load.listarLentesConStock()) {
            textAutoCompleter7.addItem(temp.getCodigo());
            textAutoCompleter7.setMode(0);
        }
        
    }

    private void calcularSaldo() {
        int total =  Integer.parseInt(txtTotal.getText());
        int abono = (int)txtAbono.getValue();
        int descuento = 0;
        int porcentaje = 0;
        if(!chkDescuento.isSelected() || cboDescuento.getSelectedIndex()==0){
            lblIdDescuento.setText("0");
            txtDescuento.setText("0");
//            lblIdTipoPago.setText("0");
            
            total = total-descuento-abono;
            txtSaldo.setText("$ "+total);
            if(total < 0){
                txtSaldo.setForeground(Color.red);
            }else{
                txtSaldo.setForeground(Color.black);
            }
        }else{
            lblIdDescuento.setText("0");
//            lblIdTipoPago.setText("0");
            cboDescuento.setVisible(true);
            lblDescuento.setVisible(true);
            txtDescuento.setVisible(true);
            String seleccionado = (String) cboDescuento.getSelectedItem();
            
            if(seleccionado != null){
                int ultimoEspacio = 0;
                for (int i=0; i < seleccionado.length()-1; i++) {
                    if (i>0 && seleccionado.substring(i, i+1).equals(" ")) {
                        ultimoEspacio = i;

                    }
                }
                seleccionado = seleccionado.substring(0, ultimoEspacio);
                }
                try {
                    Descuento des = load.buscarDescuento(seleccionado);
                    if(des != null){
                        lblIdDescuento.setText(""+des.getId());
                        porcentaje = des.getPorcetange();
                        descuento = (total*porcentaje)/100;
                        txtDescuento.setText("$ "+descuento);
                        total = total-descuento-abono;
                        txtSaldo.setText("$ "+total);
                        if(total < 0){
                            txtSaldo.setForeground(Color.red);
                        }else{
                            txtSaldo.setForeground(Color.black);
                        }
                    }
                } catch (SQLException ex) {
                    JOptionPane.showMessageDialog(null, "Error inesperado: "+ex);
                } catch (ClassNotFoundException ex) {
                    JOptionPane.showMessageDialog(null, "Error inesperado: "+ex);
                }
        }
        
            
    }

    private void limpiarDatos() throws SQLException, ClassNotFoundException {
        //Limpiar todo menos doctor y datos de entrega
        txtAbono.setValue(0);
        txtAddCerca.setText("");
        txtCiudad.setText("");
        txtComuna.setText("");
        txtArmazonCerca.setText("");
        txtArmazonLejos.setText("");
        txtCristalCerca.setText("");
        txtCristalLejos.setText("");
        txtDPCerca.setValue(0);
        txtDPLejos.setValue(0);
        txtDescuento.setText("0");
        txtDireccionCliente.setText("");
        txtEdad.setValue(0);
        txtInstitucion.setText("");
        txtMailCliente.setText("");
        txtNombreCliente.setText("");
        txtODCercaESF.setText("");
        txtODCercaA.setText("");
        txtODCercaCIL.setText("");
        txtODLejosESF.setText("");
        txtODLejosA.setText("");
        txtODLejosCIL.setText("");
        txtODLejosCIL.setText("");
        txtOICercaESF.setText("");
        txtOICercaA.setText("");
        txtOICercaCIL.setText("");
        txtOILejosESF.setText("");
        txtOILejosA.setText("");
        txtOILejosCIL.setText("");
        txtObs.setText("");
        txtRutCliente.setText("");
        txtSaldo.setText("$ 0");
        txtTelefonoCliente.setText("");
        txtArmazonCerca.setText("");
        txtArmazonLejos.setText("");
        txtTotal.setText("0");
        cargarCbos();
        
    }

    private void calcularTotal() {
        int total = Integer.parseInt(lblCristalLejos.getText()) + Integer.parseInt(lblCristalCerca.getText());
        total = total + Integer.parseInt(lblLenteCerca.getText()) + Integer.parseInt(lblLenteLejos.getText());
        txtTotal.setText(""+total);
        calcularSaldo();
    }

    
}
